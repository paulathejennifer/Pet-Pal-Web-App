<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pet Viewer App</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #fefefe; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; cursor: pointer; }
    img { border-radius: 10px; margin: 10px 0; }
    #pet-card { margin-top: 20px; }
  </style>
</head>
<body>

  <h1>üêæ Pet Viewer App</h1>

  <!-- Buttons -->
  <button onclick="fetchRandomPet()">üé≤ Random Pet</button>
  <button onclick="fetchPetsByType('dog')">üê∂ Dogs</button>
  <button onclick="fetchPetsByType('cat')">üê± Cats</button>
  <button onclick="fetchPetsByType('small-furry')">üêπ Small Pets</button>
  <button onclick="showFavorites()">‚ù§Ô∏è Wishlist</button>

  <!-- Display Card -->
  <div id="pet-card"></div>

  <script>
    const traits = ["Playful", "Curious", "Gentle", "Shy", "Energetic", "Loyal"];
    const namePrefixes = ["Fluffy", "Happy", "Mighty", "Sneaky", "Bouncy"];
    const nameSuffixes = ["Whiskers", "Tail", "Paws", "Snout", "Bark"];

    async function getAccessToken() {
      const res = await fetch("https://api.petfinder.com/v2/oauth2/token", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams({
          grant_type: "client_credentials",
          client_id: "Cti68kwTXwHjOq4NdJgQcaybEsIXbZtcrjeP6xjkC1DyrWlLEf",
          client_secret: "hXi3EhpNwsgrUbxdkfK17EBtID9xZGQIFFQS4Ib7"
        })
      });
      const data = await res.json();
      return data.access_token;
    }

    async function fetchPetsByType(petType) {
      const token = await getAccessToken();
      const res = await fetch(`https://api.petfinder.com/v2/animals?type=${petType}&limit=1`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const data = await res.json();
      const pet = data.animals[0];
      showPet(pet);
    }

    async function fetchRandomPet() {
      const token = await getAccessToken();
      const randomPage = Math.floor(Math.random() * 50) + 1;
      const res = await fetch(`https://api.petfinder.com/v2/animals?page=${randomPage}&limit=1`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const data = await res.json();
      const pet = data.animals[0];
      showPet(pet);
    }

    // function showPet(pet) {
    //   const container = document.getElementById("pet-card");
    //   const randomName = namePrefixes[Math.floor(Math.random() * namePrefixes.length)] + " " +
    //                      nameSuffixes[Math.floor(Math.random() * nameSuffixes.length)];
    //   const randomTrait = traits[Math.floor(Math.random() * traits.length)];

    //   container.innerHTML = \`
    //     <h2>\${pet.name}</h2>
    //     <img src="\${pet.photos[0]?.medium || 'https://via.placeholder.com/300'}" width="300"/>
    //     <p><strong>Species:</strong> \${pet.species}</p>
    //     <p><strong>Breed:</strong> \${pet.breeds.primary}</p>
    //     <p><strong>Age:</strong> \${pet.age}</p>
    //     <p><strong>Description:</strong> \${pet.description || 'No description available'}</p>
    //     <p><em>Suggested Fun Name:</em> \${randomName}</p>
    //     <p><em>Personality:</em> \${randomTrait}</p>
    //     <button onclick='addToFavorites(\${JSON.stringify(pet).replace(/'/g, "&apos;")})'>‚ù§Ô∏è Adopt</button>
    //   \`;
    // }

    function addToFavorites(pet) {
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      favorites.push(pet);
      localStorage.setItem("favorites", JSON.stringify(favorites));
          }

    function showFavorites() {
      const pets = JSON.parse(localStorage.getItem("favorites")) || [];
      const container = document.getElementById("pet-card");
      container.innerHTML = "<h3>Your Wishlist</h3>";

      if (pets.length === 0) {
        container.innerHTML += "<p>No adopted pets yet.</p>";
        return;
      }}

      pets.forEach(pet => {
        container.innerHTML += \`
          <div style="margin-bottom: 20px;">
            <img src="\${pet.photos[0]?.medium || 'https://via.placeholder.com/300'}" width="200"/>
            <h4>\${pet.name}</h4>
            <p>\${pet.species} - \${pet.breeds.primary}</p>
          </div>
        \`;
      });
        
  </script>

</body>
</html>